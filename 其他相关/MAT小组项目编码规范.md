# MAT小组项目编码规范

标签（空格分隔）： 小组项目 编码规范

---

# 1. 概述
## 1.1 适用范围

此文档适用于参与 ThinkPHP 项目的个人或团队使用，此次用于传智播客第48期MAT项目--MATcms；

## 1.2 目标
- 为项目建立一个可操作的编程标准
- 提高代码的可读性
- 便于后期代码的修改和项目的维护
- 增加团队协作效率

# 2. 开发工具
- 项目开发工具：Sublime;
- 字符编码：utf-8 ;
- TAB：使用缩进，缩进由制表符tab 组成，每个缩进的单位约定是一个 TAB (4 个空白字符宽度)。

# 3. 编码规范
## 3.1 开始和结束标记
- 类文件中只能包含php代码，且结束标志（"`?>`"）不允许存在；html文件中包含PHP代码时，必须使用`<?php` 和 `?>`分别作为PHP脚本的开始和结束标记。

## 3.2 注释
### 1. 类（模块）注释
- 每个.php文件首部添加注释说明，注释格式：以“`/**`”开始和以“`*/`”  作为结束；

### 2. 函数和方法注释
- 每个函数或每个方法上方添加注释说明，注释格式：以“`/**`”开始和以“`*/`”作为结束；

### 3. 变量等其他注释格式
- 用//来注释。

## 3.3 命名规范
### 1. 类文件的命名
- 以**.class.php为后缀**，使用**驼峰法命**名
    - 例如 :IndexController.class.php； 

### 2. 类的命名
- 类的命名规范同文件名的命名，并且**类的命名应该和该文件名一致**（包括大小写）
    - 例如：class IndexController exdends Controller

### 3. 方法（函数）名
- 方法名，使用**动宾结构或动词的小驼峰法**
    - 例如：public function showList(){}
- 函数名，使用小写字母和下划线的方式
    - 例如:：http_url（）

### 4. 属性（变量）名
- 属性名，使用**名词或父级+子级名词的小驼峰法**
    - 例如：firstRow
- 常量名，使用以大写字母和下划线命名；
    - 例如：WEB_ROOT
- 方法中**形参**推荐采用 \$data，返回的**列表**采用 \$list

### 5. 其他
- 模板文件，ThinkPHP的模板文件以.html 为后缀
- 数据表带有前缀；字段采用小写加下划线方式命名，并注意字段名不要以下划线开头
    - 例如：user_email;
- 文件的调用，要确保文件的命名和调用大小写一致
    - 例如：use \Think\Page;
- 函数文件、配置文件等类库文件一般.php作为后缀
    - 例如：conf.php;

# 4. 典型MVC命名规范
## 4.1 控制器层
- index 首页
- add 添加
- edit 修改
- save 保存
- listorder 排序（继承父类）
- setStatus 删除（逻辑删除，继承父类）
- 对从模型中获取数据应该用`try...catch...`防止异常

## 4.2. 模型层 （XXX = 表名）
- insert 添加 ->add
- select/getXXX 获取内容 ->index
- getXXXCount 获取数量（不要变复数） ->index->分页
- find 获取一条数据 ->edit
- updateById 修改一条数据 ->save
- updateStatusById 修改状态（删除）->setStatus
- updateListOrderById 修改排序数据 ->index

## 4.3. 视图 (推荐)
- 变量输出`{$xx对象.xx属性|xx函数="xx参数", ###}`
- 优先采用`volist`，遇到索引数组再采用`foreach`
- `volist,foreach` 中`name`一般采用复数形式，`id,item`采用单数形式
- if标签中，逻辑判断使用`eq,neq,gt,lt`
- 页头页尾使用`<include file="Public:header(footer)" />`